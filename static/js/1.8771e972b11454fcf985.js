webpackJsonp([1],{Vkux:function(t,e){},YeXK:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("mt/N"),o=s("mtWM"),a=s.n(o),i={data:function(){return{categories:["tech","idea","other"],post:{category:"other",title:"",body:"",updatedAt:"",tags:[]},newTagInputVisible:!1,newTagInputValue:""}},beforeRouteEnter:function(t,e,s){s(function(t){t.getPost()})},beforeRouteLeave:function(t,e,s){this.resetNewPost(),s()},methods:{handleClose:function(t){this.post.tags.splice(this.post.tags.indexOf(t),1)},showInput:function(){var t=this;this.newTagInputVisible=!0,this.$nextTick(function(e){t.$refs.saveNewTagInput.$refs.input.focus()})},handleInputConfirm:function(){var t=this.newTagInputValue;t&&this.post.tags.push(t),this.newTagInputVisible=!1,this.newTagInputValue=""},resetNewPost:function(){this.post={category:"other",title:"",body:"",updatedAt:"",tags:[]}},getPost:function(){var t=this,e=t.$route.params.id;e&&a.a.get(n.a.api.post+e).then(function(e){t.post=e.data})},doSavePost:function(){this.post.updatedAt=n.a.kits.moment().format("YYYY-MM-DD HH:mm:ss");var t=this.$route.params.id,e=this;t?a.a.put(n.a.api.post+t,e.post).then(function(t){e.$router.push({name:"post-all"})},function(t){console.log(t)}):a.a.post(n.a.api.post,e.post).then(function(t){e.$router.push({name:"post-all"})},function(t){console.log(t)})}},computed:{postPreviewHtml:function(){return n.a.kits.preview(this.post.body)}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"post-editor"},[s("div",{staticClass:"post-edit"},[s("div",{staticClass:"post-edit-category-and-title"},[s("el-select",{staticClass:"post-category",attrs:{size:"mini"},model:{value:t.post.category,callback:function(e){t.$set(t.post,"category",e)},expression:"post.category"}},t._l(t.categories,function(t){return s("el-option",{key:t,attrs:{label:t,value:t}})})),t._v(" "),s("el-input",{staticClass:"post-title",attrs:{size:"mini"},model:{value:t.post.title,callback:function(e){t.$set(t.post,"title",e)},expression:"post.title"}}),t._v(" "),s("el-button",{attrs:{type:"primary",plain:"",size:"mini"},on:{click:t.doSavePost}},[t._v("save")])],1),t._v(" "),s("div",{staticClass:"post-tags-row"},[t._l(t.post.tags,function(e){return s("el-tag",{key:e,attrs:{type:"danger",size:"small",closable:""},on:{close:function(s){t.handleClose(e)}}},[t._v(t._s(e)+"\n      ")])}),t._v(" "),t.newTagInputVisible?s("el-input",{ref:"saveNewTagInput",staticStyle:{width:"90px"},attrs:{size:"mini"},on:{blur:t.handleInputConfirm},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleInputConfirm(e):null}},model:{value:t.newTagInputValue,callback:function(e){t.newTagInputValue=e},expression:"newTagInputValue"}}):s("el-button",{attrs:{type:"default",size:"mini",plain:""},on:{click:t.showInput}},[t._v("+ New Tag")])],2),t._v(" "),s("el-input",{staticClass:"post-body",attrs:{type:"textarea",autosize:{minRows:32,maxRows:32}},model:{value:t.post.body,callback:function(e){t.$set(t.post,"body",e)},expression:"post.body"}})],1),t._v(" "),s("div",{staticClass:"post-preview",domProps:{innerHTML:t._s(t.postPreviewHtml)}})])},staticRenderFns:[]};var l=s("VU/8")(i,u,!1,function(t){s("Vkux")},"data-v-32d458da",null);e.default=l.exports}});
//# sourceMappingURL=1.8771e972b11454fcf985.js.map